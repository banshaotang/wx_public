window.__require=function e(i,t,o){function n(s,r){if(!t[s]){if(!i[s]){var c=s.split("/");if(c=c[c.length-1],!i[c]){var h="function"==typeof __require&&__require;if(!r&&h)return h(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+s+"'")}}var l=t[s]={exports:{}};i[s][0].call(l.exports,function(e){return n(i[s][1][e]||e)},l,l.exports,e,i,t,o)}return t[s].exports}for(var a="function"==typeof __require&&__require,s=0;s<o.length;s++)n(o[s]);return n}({YouziBoxManager:[function(e,i,t){"use strict";cc._RF.push(i,"6a9a8rOkk1I5oGdyeS4hdsN","YouziBoxManager");var o=e("./YouziData"),n=function(){function e(){this.referrerInfo={}}var i=e.prototype;return i.wxLaunch=function(e){e.referrerInfo&&e.referrerInfo.appId&&e.referrerInfo.extraData&&e.referrerInfo.extraData.togame&&(this.referrerInfo=e.referrerInfo.extraData,this.referrerInfo.appid=e.referrerInfo.appId),e.query&&e.query.appid&&e.query.togame&&(this.referrerInfo=e.query,this.referrerInfo.appid=e.query.appid),e.query&&this.referrerInfo&&e.query.anChannelId&&(this.referrerInfo.anChannelId=e.query.anChannelId,this.referrerInfo.ioChannelId=e.query.ioChannelId)},i.wxOnShow=function(e){1037==e.scene&&(e.referrerInfo&&e.referrerInfo.appId&&e.referrerInfo.extraData&&e.referrerInfo.extraData.togame&&(this.referrerInfo=e.referrerInfo.extraData,this.referrerInfo.appid=e.referrerInfo.appId),e.query&&e.query.appid&&e.query.togame&&(this.referrerInfo=e.query,this.referrerInfo.appId=e.query.appid),e.query&&this.referrerInfo&&e.query.anChannelId&&(this.referrerInfo.anChannelId=e.query.anChannelId,this.referrerInfo.ioChannelId=e.query.ioChannelId))},i.sendExposureLog=function(e,i){o.YouziData.sendExposureLog(e,i)},i.sendBox2Open=function(){var e=o.YouziData.YouziDateFtt("yyyy-MM-dd hh:mm:ss",new Date),i=this.referrerInfo&&this.referrerInfo.appid?this.referrerInfo.appid:o.YouziData.appid,t=this.referrerInfo&&this.referrerInfo.togame?this.referrerInfo.togame:o.YouziData.appid;o.YouziData._userinfo.uid||o.YouziData._loadUid();var n={logType:"box2open",channelId:o.YouziData.channelId,orgAppid:i,uid:o.YouziData._userinfo.uid,languageType:1,jumpAppid:t,boxAppid:o.YouziData.appid,locationIndex:o.BI_PAGE_TYPE.BUY_Screen,recommendType:1,screenId:1,dt:e,sdkVersion:o.YouziData.SdkVersion};console.log(n),o.YouziData.logNavigate(n,function(e){console.log("log event sendBox2Open success---")})},i.navigateToOtherGame=function(e,i){o.YouziData._userinfo.uid||o.YouziData._loadUid();var t=o.YouziData.YouziDateFtt("yyyy-MM-dd hh:mm:ss",new Date),n=this.referrerInfo&&this.referrerInfo.appid?"jump2app":"box2app",a=this.referrerInfo&&this.referrerInfo.appid?this.referrerInfo.appid:o.YouziData.appid,s=function(e){console.log(n+" event logged success---")},r=o.YouziData._userinfo.uid,c=this.referrerInfo.userType?this.referrerInfo.userType:1,h={logType:n,userType:c,channelId:o.YouziData.channelId,orgAppid:a,uid:r,languageType:1,jumpAppid:e.appid,boxAppid:this.referrerInfo.boxAppid?this.referrerInfo.boxAppid:o.YouziData.appid,locationIndex:e.locationIndex?e.locationIndex:this.referrerInfo.locationIndex,recommendType:3,screenId:1,dt:t,sdkVersion:o.YouziData.SdkVersion},l=e.appid,u=o.YouziData.appid;e.boxAppId&&e.boxAppId!=o.YouziData.appid&&(!0,u=l=e.boxAppId);var d={togame:e.appid,boxAppid:u,orgAppid:a,YouziFixUID:r,userType:c},p=null;if(e.miniProgramArgs&&""!=e.miniProgramArgs&&(p=e.miniProgramArgs),(e.anChannelId||e.ioChannelId)&&(p=null!=p?p+"&anChannelId="+e.anChannelId+"&ioChannelId="+e.ioChannelId:"?anChannelId="+e.anChannelId+"&ioChannelId="+e.ioChannelId),console.log("mimiProgramPath:"+p),e.miniGameArgs&&""!=e.miniGameArgs){var f=JSON.parse(e.miniGameArgs),g=Object.keys(f)[0];if("togame"==g||"boxAppid"==g||"orgAppid"==g)return void console.log("\u8054\u8fd0\u9644\u52a0key\u503c\u51b2\u7a81");d[g]=f[g]}console.log("extraData"+JSON.stringify(d)),wx.navigateToMiniProgram({appId:l,path:p,extraData:d,success:function(e){o.YouziData.logNavigate(h,s),i&&i("success"),console.log("box manager navigateToMiniProgram success")},fail:function(e){console.log("box manager navigateToMiniProgram fail"),i&&i("fail")}})},e}();window.YouziBoxManager=new n,cc._RF.pop()},{"./YouziData":"YouziData"}],YouziData:[function(e,i,t){"use strict";cc._RF.push(i,"24f428+FvdLp7QsZYFPZVav","YouziData"),Object.defineProperty(t,"__esModule",{value:!0});var o=t.BANNER_TYPE={MATRIX:1,WX:2,GAME:3,SWITCH:4},n=2,a=3,s=t.BI_PAGE_TYPE={MAIN:1,FLOAT:2,MATRIX:3,GUESS:4,MORE:5,GAME:6,OFFLINE:7,BUY_Screen:8,BUY_BOX:9,SMALL_MATRIX_WALL:10,CUSTOM_COMPONENT:9999},r=1,c=2,h=3,l=4,u=5,d=6,p=7,f=8,g=9,m=t.YouziData={SdkVersion:"5.8.5",resVersion:"1.00.00",debug:!1,appid:"",channelId:1002,bannnerDatas:[],itemListDatas:[],hotListDatas:[],moreDatas:[],matrixBannerDatas:[],mainRecDatas:[],buyListDatas:[],gameBannerDatas:[],offlineBannerDatas:[],allBeRecommendGames:{},_userinfo:{uid:"",gender:0,type:1},_platform:cc.sys.os==cc.sys.OS_ANDROID?n:a,_isDataLoaded:!1,_isLoadFinish:!1,_requestErrorCbs:[],_loadedCallBacks:[],_bannerType:o.MATRIX,_banerShowSwitchInterval:10,_bannerCreateInterval:20,_pageOpen:1,_bannerSwitchs:[],_provinceAllow:1,mainRecAmount:1,init:function(e,i,t){this.isInit||(console.log("\u4e2d\u5fc3\u5316\u521d\u59cb\u5316 SdkVersion",this.SdkVersion,e,i,t),console.log(this.debug),this.isInit=!0,this.appid=e||"",this.resVersion=i||"1.00.00",this.channelId=t||1002,this._loadUid(),this._loadData(this._initBannerShow.bind(this)),this._wxLaunch())},getMainNum:function(e){if(!e||0===e.length)return[0,!1];var i=e.length,t=m.mainRecAmount,o=m.mainRecDatas.length;return i>=t?t>=o?[o,!1]:[t,!0]:i>=o?[o,!1]:[i,!0]},getGamesIndex:function(e,i){for(var t=[],o=0;o<e;o++)t.push(o);if(e<=i)return t;for(var n=void 0,a=void 0;e;)a=Math.floor(Math.random()*e--),n=t[e],t[e]=t[a],t[a]=n;return t.slice(0,i)},_wxLaunch:function(){if(window.wx&&wx.getLaunchOptionsSync){var e=this,i=wx.getLaunchOptionsSync();this._loadUid(),this.checkUserIsImported(i),i.referrerInfo&&i.referrerInfo.appId&&i.referrerInfo.extraData&&i.referrerInfo.extraData.boxAppid&&i.referrerInfo.extraData.orgAppid?this.sendJumpToOpen(i.referrerInfo.extraData.orgAppid,i.referrerInfo.extraData.boxAppid,i.referrerInfo.extraData.locationIndex?i.referrerInfo.extraData.locationIndex:s.CUSTOM_COMPONENT):this.openGameInitLog(),wx.onShow(function(i){e._wxOnShow(i)})}},_wxOnShow:function(e){console.log("wx onShow--------------"),this.checkUserIsImported(e),e.referrerInfo&&e.referrerInfo.extraData&&e.referrerInfo.extraData.boxAppid&&e.referrerInfo.extraData.orgAppid&&this.sendJumpToOpen(e.referrerInfo.extraData.orgAppid,e.referrerInfo.extraData.boxAppid,e.referrerInfo.extraData.locationIndex?e.referrerInfo.extraData.locationIndex:s.CUSTOM_COMPONENT)},checkUserIsImported:function(e){(e.referrerInfo&&e.referrerInfo.adChannelId&&e.referrerInfo.adSubChannelId||e.query&&e.query.adChannelId&&e.query.adSubChannelId)&&(this._userinfo.type=2),(e.referrerInfo&&e.referrerInfo.leuokShareIn||e.query&&e.query.leuokShareIn)&&(this._userinfo.type=3);var i=!1;if(e.referrerInfo&&e.referrerInfo.extraData&&(e.referrerInfo.extraData.YouziFixUID&&e.referrerInfo.extraData.YouziFixUID.trim().length>0?(i=!0,this._userinfo.uid=e.referrerInfo.extraData.YouziFixUID):e.referrerInfo.extraData.YouziUID&&e.referrerInfo.extraData.YouziUID.trim().length>0&&(i=!0,this._userinfo.uid=e.referrerInfo.extraData.YouziUID)),e.query&&e.query.extraData&&e.query.extraData.YouziUID&&(i=!0,this._userinfo.uid=e.query.YouziUID),i)try{localStorage.setItem("YOUZI_UID",this._userinfo.uid)}catch(e){console.log("set uid to localstorage fail! current uid: "+this._userinfo.uid)}},_loadData:function(e){var i=this,t={appid:i.appid,channelId:i.channelId,languageType:1,uid:i._userinfo.uid,version:i.resVersion},n=function(){console.log("\u4e2d\u5fc3\u5316\u6570\u636e\u5f02\u5e38"),i._isLoadFinish=!0;for(var e=0;e<i._requestErrorCbs.length;e++){var t=i._requestErrorCbs[e];t&&t()}},a=function(t){var n=JSON.parse(JSON.stringify(t));if(console.log("\u4e2d\u5fc3\u5316\u6570\u636eOK",n),t&&t.info&&t.info.swith&&1==t.info.swith){i._pageOpen=t.info.status,i._bannerType=t.info.bannerSwith,i._banerShowSwitchInterval=t.info.bannerAutoInterval,i._bannerCreateInterval=t.info.wxBannerRefresh,i._provinceAllow=t.info.provinceAllow,i.mainRecAmount=t.info.mainRecAmount;for(var a=function(e,i){return i.weight-e.weight},s=function(e){return e=e.sort(a),e=i._clearArrIndex(e),e=i._removeItemByTestPeriod(e)},m=0;m<t.info.recommendListBos.length;m++){var v=t.info.recommendListBos[m];switch(v.contentBos.forEach(function(e){i.allBeRecommendGames.hasOwnProperty.call({},e.appid)||(i.allBeRecommendGames[e.appid]=Object.assign({},e))}),v.type){case r:i.bannnerDatas=s(v.contentBos);break;case c:i.itemListDatas=s(v.contentBos);break;case h:i.hotListDatas=s(v.contentBos);break;case f:i.moreDatas=s(v.contentBos);break;case g:i.matrixBannerDatas=s(v.contentBos);break;case l:i.mainRecDatas=s(v.contentBos);break;case u:i.gameBannerDatas=s(v.contentBos);break;case d:i.offlineBannerDatas=s(v.contentBos);break;case p:i.buyListDatas=s(v.contentBos);break;default:console.error("\u4e2d\u5fc3\u5316\u6570\u636e\u7c7b\u578b\u9519\u8bef",v.type)}}}console.log(i.allBeRecommendGames),i._isDataLoaded=!0,i._isLoadFinish=!0,e&&e(t);for(var I=0;I<i._loadedCallBacks.length;I++){var _=i._loadedCallBacks[I];_&&_()}i._bannerType==o.SWITCH&&(i.refreshBannerSwitch(),setInterval(i.refreshBannerSwitch.bind(i),1e3*i._banerShowSwitchInterval))};i._getWxUserInfo(function(){i._request("POST",t,i._url(),a,n)})},_clearArrIndex:function(e){for(var i=[],t=0;t<e.length;t++){var o=e[t];this._pushData(o.hide)&&i.push(o)}for(var n=[],a=0;a<i.length;a++){var s=i[a];this._pushDataBySexual(s.gender)&&n.push(s)}return n},_request:function(e,i,t,o,n){var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==a.readyState)if(a.status>=200&&a.status<400)if(""!=a.responseText){var e=JSON.parse(a.responseText);o&&o(e)}else o&&o({});else n&&n()},a.open(e,t,!0),a.setRequestHeader("content-type","application/json"),a.send(JSON.stringify(i))},_loadUid:function(){try{var e=localStorage.getItem("YOUZI_UID");e&&e.trim().length>0?this._userinfo.uid=e:(this._userinfo.uid="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var i=16*Math.random()|0;return("x"==e?i:3&i|8).toString(16)}),localStorage.setItem("YOUZI_UID",this._userinfo.uid))}catch(e){this._userinfo.uid="10001"}},_removeItemByTestPeriod:function(e){for(var i=0;i<e.length;i++){var t=e[i];if(1!=t.testPeriod&&3!=t.testPeriod||0!=t.showLimit){if(2==t.testPeriod){var o=localStorage.getItem(t.appid);o&&"CPACPS"==o&&(e.splice(i,1),i--)}}else{var n=localStorage.getItem(t.appid);if(n&&"navigated"==n)continue;e.splice(i,1),i--}}return e},_url:function(){return this.debug?"https://test.gw.leuok.com/gl-ms-mini-recommend/recommend/show":"https://gw.lightlygame.com/gl-ms-mini-recommend/recommend/show"},_pushData:function(e){var i=!1;switch(e){case 1:i=!0;break;case 2:this._platform==n&&(i=!0);break;case 3:this._platform==a&&(i=!0);break;default:i=!1}return i},_pushDataBySexual:function(e){var i=!1;switch(e){case 0:i=!0;break;case 1:1==this._userinfo.gender&&(i=!0);break;case 2:2==this._userinfo.gender&&(i=!0);break;default:i=!1}return i},_getWxUserInfo:function(e){var i=this;window.wx&&wx.getUserInfo?wx.getUserInfo({success:function(t){i._userinfo.gender=t.userInfo.gender,e()},fail:function(i){e()}}):e()},_loadTexture:function(e,i){cc.loader.loadRes(i,function(i,t){i?console.error(i):e.spriteFrame=new cc.SpriteFrame(t)})},startOtherGame:function(e,i,t){1==e.codeJump?this.wxPreviewImage(e.chopencode||e.vopencode||e.hopencode,e,i):this.navigateToOtherGame(e,i,t)},sendExposureLog:function(e,i){if(e){var t=this.YouziDateFtt("yyyy-MM-dd hh:mm:ss",new Date),o={logType:"exposure",channelId:this.channelId,orgAppid:this.appid,uid:this._userinfo.uid,languageType:1,jumpAppid:e.appid,locationIndex:i||s.CUSTOM_COMPONENT,recommendType:e.type?e.type:1,screenId:i||1,dt:t,sdkVersion:this.SdkVersion};this.logNavigate(o,function(e){})}else console.warn("\u53d1\u9001\u66dd\u5149\u65e5\u5fd7\u65f6,data\u4e0d\u5b58\u5728",e,i)},navigateToOtherGame:function(e,i,t){if(window.wx&&wx.navigateToMiniProgram){var o=this,n=e.appid,a=!1,s="leuokNull";e.boxAppId&&""!=e.boxAppId&&(a=!0,s=n=e.boxAppId);var r={togame:e.appid,boxAppid:s,orgAppid:o.appid,YouziUID:o.uid,YouziFixUID:o._userinfo.uid,userType:o._userinfo.type,locationIndex:e.locationIndex},c=null;if(e.miniProgramArgs&&""!=e.miniProgramArgs&&(c=e.miniProgramArgs),(e.anChannelId||e.ioChannelId)&&(c=null!=c?c+"&anChannelId="+e.anChannelId+"&ioChannelId="+e.ioChannelId:"?anChannelId="+e.anChannelId+"&ioChannelId="+e.ioChannelId),console.log("mimiProgramPath:"+c),e.miniGameArgs&&""!=e.miniGameArgs){var h=JSON.parse(e.miniGameArgs),l=Object.keys(h)[0];if("togame"==l||"boxAppid"==l||"orgAppid"==l)return void console.log("\u8054\u8fd0\u9644\u52a0key\u503c\u51b2\u7a81");r[l]=h[l]}console.log("extraData"+JSON.stringify(r)),wx.navigateToMiniProgram({appId:n,path:c,extraData:r,success:function(t){a?o.sendGameToBox(e):o.sendGameToGame(e),a=!1,i&&i(),console.log("navigateToMiniProgram success"),e.testPeriod&&"1"==e.testPeriod?localStorage.setItem(e.appid,"navigated"):"2"==e.testPeriod&&localStorage.setItem(e.appid,"CPACPS")},fail:function(){if(t){console.log("cancel jump to other game!");try{t()}catch(e){console.log("open failed")}}}})}},sendJumpToOpen:function(e,i){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.CUSTOM_COMPONENT,o="jump2open";"leuokNull"==i&&(o="app2open",i="");var n=this.YouziDateFtt("yyyy-MM-dd hh:mm:ss",new Date),a={logType:o,userType:this._userinfo.type,channelId:this.channelId,orgAppid:e,boxAppid:i,uid:this._userinfo.uid,languageType:1,jumpAppid:this.appid,locationIndex:t,recommendType:1,screenId:1,dt:n,sdkVersion:this.SdkVersion};console.log(a),this.logNavigate(a,function(e){console.log("log event sendJumpToOpen success---")})},openGameInitLog:function(){var e=this.YouziDateFtt("yyyy-MM-dd hh:mm:ss",new Date),i={logType:"login",channelId:this.channelId,orgAppid:this.appid,uid:this._userinfo.uid,dt:e,sdkVersion:this.SdkVersion};this.logNavigate(i,function(){console.log("log event sendYouziSdk init success---")})},sendGameToGame:function(e){var i=this.YouziDateFtt("yyyy-MM-dd hh:mm:ss",new Date),t={logType:"app2app",userType:this._userinfo.type,channelId:this.channelId,orgAppid:this.appid,uid:this._userinfo.uid,languageType:1,jumpAppid:e.appid,locationIndex:e.locationIndex,recommendType:e.type,screenId:1,dt:i,sdkVersion:this.SdkVersion};console.log(t),this.logNavigate(t,function(e){console.log("log event success---")})},sendGameToBox:function(e){var i=this.YouziDateFtt("yyyy-MM-dd hh:mm:ss",new Date),t={logType:"jump2box",userType:this._userinfo.type,channelId:this.channelId,orgAppid:this.appid,uid:this._userinfo.uid,languageType:1,boxAppid:e.boxAppId,jumpAppid:e.appid,locationIndex:e.locationIndex,recommendType:e.type,screenId:1,dt:i,sdkVersion:this.SdkVersion};console.log(t),this.logNavigate(t,function(e){console.log("log event success---")})},wxPreviewImage:function(e,i,t){var o=this;wx.previewImage({current:e,urls:[e],success:function(){t&&t(),o.sendGameByQrcode(i)}})},sendGameByQrcode:function(e){var i=this.YouziDateFtt("yyyy-MM-dd hh:mm:ss",new Date),t={logType:"showcode",userType:this._userinfo.type,channelId:this.channelId,orgAppid:this.appid,uid:this._userinfo.uid,languageType:1,jumpAppid:e.appid,locationIndex:e.locationIndex,recommendType:e.type,screenId:1,dt:i,sdkVersion:this.SdkVersion};console.log(t),this.logNavigate(t,function(e){console.log("log event success---")})},logNavigate:function(e,i){this.debug||this._request("POST",e,"https://bi.log.lightlygame.com/recommend/",i)},YouziDateFtt:function(e,i){var t={"M+":i.getMonth()+1,"d+":i.getDate(),"h+":i.getHours(),"m+":i.getMinutes(),"s+":i.getSeconds(),"q+":Math.floor((i.getMonth()+3)/3),S:i.getMilliseconds()};for(var o in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(i.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+o+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[o]:("00"+t[o]).substr((""+t[o]).length)));return e},getDatasByBIType:function(e){return 1==e?this.mainRecDatas:2==e?this.hotListDatas:3===e||4==e?this.matrixBannerDatas:5===e||10===e?this.moreDatas:6==e?this.gameBannerDatas:7==e?this.offlineBannerDatas:8==e||9==e?this.buyListDatas:(console.error("\u672a\u627e\u5230\u4e2d\u5fc3\u5316\u6570\u636e locationIndex",e),[])},_initBannerShow:function(){if(this._bannerType==o.MATRIX||this._bannerType==o.GAME||this._bannerType==o.WX)for(var e=0;e<this._bannerSwitchs.length;e++){var i=this._bannerSwitchs[e];i&&i.bannerType==this._bannerType?i.showBanner():i&&i.hideBanner()}else if(this._bannerType==o.SWITCH)for(var t=0;t<this._bannerSwitchs.length;t++){var n=this._bannerSwitchs[t];n&&n.bannerType==o.MATRIX?n.showBanner():n&&n.hideBanner()}},addBanner:function(e){this._destroyUnuseWxBanner(e),this._bannerSwitchs.push(e),this._isDataLoaded&&this._initBannerShow()},refreshBannerSwitch:function(){this.curBannerType||(this.curBannerType=o.WX),this.curBannerType=this.curBannerType==o.WX?o.MATRIX:o.WX;for(var e=0;e<this._bannerSwitchs.length;e++){var i=this._bannerSwitchs[e];i&&i.bannerType==this.curBannerType?i.showBanner():i&&i.hideBanner()}},_destroyUnuseWxBanner:function(e){if(e.bannerType==o.WX)for(var i=0;i<this._bannerSwitchs.length;i++){var t=this._bannerSwitchs[i];if(t&&t.bannerType==o.WX)return t.destroySelf(),void this._bannerSwitchs.splice(i,1)}},_checkExposureInview:function(e,i,t,o,n){for(var a=[],s=0;s<e.length;s++){var r=e[s],c=this._getDataByAppid(o,r.name);if(c){var h=r.convertToWorldSpace(cc.v2(0,0));i?h.x<i&&(this.sendExposureLog(c,n),a.push(c.appid)):t&&h.y>t&&(this.sendExposureLog(c,n),a.push(c.appid))}else console.warn("\u6570\u636e\u4e22\u5931 appid:",r.name)}return a},_checkExposureInview1:function(e,i,t,o,n,a,s,r){for(var c=0,h=0;h<e.length;h++){var l=e[h],u=this._getDataByAppid(t,l.name);if(u){var d=l.convertToWorldSpaceAR(cc.v2(-l.width/2,l.height/2));i?d.y>=s&&d.y<=r&&(this.sendExposureLog(u,o),c++):d.x>=n&&d.x<=a&&(this.sendExposureLog(u,o),c++)}else console.warn("\u6570\u636e\u4e22\u5931 appid:",l.name)}return c},_hideShowChild:function(e,i,t,o,n,a){var s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];if(!(e.length<5))for(var r=void 0,c=void 0,h=0;h<e.length;h++)c=(r=e[h].children[0]).convertToWorldSpaceAR(cc.v2(-r.width/2,r.height/2)),i?c.y>=n&&c.y<=a?r.active=!0:s&&(r.active=!1):c.x>=t&&c.x<=o?r.active=!0:s&&(r.active=!1)},getDataFromAllGameObj:function(e){return this.allBeRecommendGames[e]},_getDataByAppid:function(e,i){for(var t=0;t<e.length;t++)if(e[t].appid==i)return e[t];return null},scrollviewAction:function(e,i,t,o){if(e&&e.content){var n=e.content.children.length;if(n<=t)return;var a=void 0;a=o||i*(n-1);var s=e.vertical;e.node.stopAllActions(),e.node.runAction(cc.repeatForever(cc.sequence(cc.delayTime(1),cc.callFunc(function(){e&&e.content&&(s?e.getScrollOffset().y>e.getMaxScrollOffset().y/2?e.scrollToTop(a,!1):e.scrollToBottom(a,!1):e.getScrollOffset().x<-e.getMaxScrollOffset().x/2?e.scrollToLeft(a,!1):e.scrollToRight(a,!1))}),cc.delayTime(a-1))))}},BI_AppOnce:function(e){var i=this.getBI();i&&i.leuok&&i.leuok.appOnce(e)},BI_Action:function(e){var i=this.getBI();i&&i.leuok&&i.leuok.action(e)},BI_WXBannerError:function(e){var i=this.getBI();i&&i.leuok&&i.leuok.error(e)},getBI:function(){return"undefined"!=typeof wx?wx:"undefined"!=typeof BK?BK:"undefined"!=typeof qg?qg:"undefined"!=typeof window?window:void 0}};window.YouziData=m,cc._RF.pop()},{}],YouziUI_Box:[function(e,i,t){"use strict";cc._RF.push(i,"12c67A6DtdDhLd6HtGehXB9","YouziUI_Box"),Object.defineProperty(t,"__esModule",{value:!0}),t.YouziCreateBox=function(e,i){try{cc.loader.loadRes("youzi/prefabs/YouziUI_Box",function(t,o){i=i||{};var a=cc.instantiate(o);a.position=cc.v2(0,0),e.addChild(a);var s=a.getComponent(n);s.DIY(i),i.callback&&i.callback(a)})}catch(t){console.error("YouziCreateBox \u751f\u6210\u9519\u8bef",e,i)}};var o=e("./YouziData"),n=cc.Class({extends:cc.Component,properties:{mainCellPrefab:{type:cc.Prefab,default:null},hotCellPrefab:{type:cc.Prefab,default:null}},onLoad:function(){this.main=[],this.hot=[],this.buy=[],this.BILOG_GROUP=99,this.gameSceneName=null,this.boxNode=this.node.getChildByName("Box"),this.luodiNode=this.node.getChildByName("LuoDi"),this.startBtnNode=this.luodiNode.getChildByName("startButton"),this.luodiSmallImg=this.luodiNode.getChildByName("Small").getComponent(cc.Sprite),this.luodiBigImg=this.luodiNode.getChildByName("Big").getComponent(cc.Sprite),this.boxSrc=this.boxNode.getChildByName("ScrollView").getComponent(cc.ScrollView),this.closeLuoDiBtn=this.luodiNode.getChildByName("closeButton").getComponent(cc.Button),this.luodiBtn=this.luodiNode.getComponent(cc.Button)},start:function(){o.YouziData.BI_Action({actionType:this.BILOG_GROUP,actionNumber:1}),this.initShow()},DIY:function(e){this.gameSceneName=e.gameSceneName},initShow:function(){var e=new cc.Component.EventHandler;e.target=this.node,e.component="YouziUI_Box",e.handler="closeLuoDi",this.closeLuoDiBtn.clickEvents.push(e);var i=new cc.Component.EventHandler;i.target=this.node,i.component="YouziUI_Box",i.handler="btnLuoDiClick",this.luodiBtn.clickEvents.push(i),o.YouziData._isDataLoaded?(this.loadDataBI(),this.freshShow()):o.YouziData._loadedCallBacks.push(this.freshShow.bind(this))},loadDataBI:function(){!(o.YouziData.hotListDatas.length>0||o.YouziData.moreDatas.length>0||o.YouziData.matrixBannerDatas.length>0)&&o.YouziData.mainRecDatas.length<=0?(o.YouziData.BI_AppOnce({actionNumber:1006}),o.YouziData.BI_Action({actionType:this.BILOG_GROUP,actionNumber:10}),this.goGame()):(o.YouziData.BI_AppOnce({actionNumber:1005}),o.YouziData.BI_Action({actionType:this.BILOG_GROUP,actionNumber:3}))},freshShow:function(){this.loadDataBI();var e=this;if("undefined"!=typeof wx){var i=wx.getLaunchOptionsSync();YouziBoxManager.wxLaunch(i),this.initUI(i);wx.onShow(function(i){YouziBoxManager.wxOnShow(i),e.initUI(i)})}else o.YouziData.BI_Action({actionType:this.BILOG_GROUP,actionNumber:15}),this.goGame()},initUI:function(e){this.startBtnNode.active=!1,this.boxSrc.content.removeAllChildren(!0),console.log("\u5fae\u4fe1\u542f\u52a8\u53c2\u6570",e),e.query&&e.query.adChannelId?this.getRecommend(!0):e.referrerInfo&&e.referrerInfo.extraData&&e.referrerInfo.extraData.adChannelId?this.getRecommend(!0):this.getRecommend(!1)},getRecommend:function(e){if(0==o.YouziData._provinceAllow)return o.YouziData.BI_Action({actionType:this.BILOG_GROUP,actionNumber:11}),void this.goGame();o.YouziData.BI_Action({actionType:this.BILOG_GROUP,actionNumber:4});var i=wx.getStorageSync("userType")||0;if(0==i){if(!e)return o.YouziData.BI_Action({actionType:this.BILOG_GROUP,actionNumber:12}),wx.setStorageSync("userType",2),wx.setStorageSync("inTimes",1),void this.goGame();o.YouziData.BI_Action({actionType:this.BILOG_GROUP,actionNumber:5}),wx.setStorageSync("userType",1)}else if(1==i)o.YouziData.BI_Action({actionType:this.BILOG_GROUP,actionNumber:17});else{if(2!=i)return o.YouziData.BI_Action({actionType:this.BILOG_GROUP,actionNumber:14}),void this.goGame();if(e)o.YouziData.BI_Action({actionType:this.BILOG_GROUP,actionNumber:18}),wx.setStorageSync("userType",1);else{var t=wx.getStorageSync("inTimes")||0;if(t+=1,wx.setStorageSync("inTimes",t),t<3)return o.YouziData.BI_Action({actionType:this.BILOG_GROUP,actionNumber:13}),void this.goGame();o.YouziData.BI_Action({actionType:this.BILOG_GROUP,actionNumber:16}),wx.setStorageSync("userType",1)}}if(this.main=o.YouziData.mainRecDatas,this.hot=o.YouziData.hotListDatas,this.buy=o.YouziData.buyListDatas,console.log("\u4e3b\u63a8",this.main),console.log("\u70ed\u6e38",this.hot),console.log("\u4e70\u91cf",this.buy),this.buy.length>0&&e){var n=this.buy[0],a=n.newPush||n.iconImg;this.luodiBigImg.node.active=n.newPush,this.luodiSmallImg.node.active=n.iconImg,this.startBtnNode.active=this.luodiSmallImg.node.active,this.luodiInfo=n,a?this.showLuoDi(n.newPush,n.iconImg):this.showJiuGong(this.main,this.hot)}else this.luodiNode.active=!1,this.showJiuGong(this.main,this.hot)},showLuoDi:function(e,i){var t=this;e?cc.loader.load(e,function(e,i){t&&(e?t.closeLuoDi():(t.luodiBigImg.spriteFrame=new cc.SpriteFrame(i),t.luodiNode.active=!0))}):i?cc.loader.load(i,function(e,i){t&&(e?t.closeLuoDi():(t.luodiSmallImg.spriteFrame=new cc.SpriteFrame(i),t.luodiNode.active=!0))}):t.closeLuoDi(),YouziBoxManager.sendBox2Open(),o.YouziData.BI_AppOnce({actionNumber:1003}),o.YouziData.BI_Action({actionType:this.BILOG_GROUP,actionNumber:6})},showJiuGong:function(e,i){for(var t=e.length/2,n=0;n<t;n++){var a=e[2*n+0],s=e[2*n+1],r=cc.instantiate(this.mainCellPrefab);this.boxSrc.content.addChild(r);var c=r.getChildByName("1"),h=r.getChildByName("2");this.loadCell(a,c),this.loadCell(s,h)}for(var l=i.length/3,u=0;u<l;u++){var d=i[3*u+0],p=i[3*u+1],f=i[3*u+2],g=cc.instantiate(this.hotCellPrefab);this.boxSrc.content.addChild(g);var m=g.getChildByName("1"),v=g.getChildByName("2"),I=g.getChildByName("3");this.loadCell(d,m),this.loadCell(p,v),this.loadCell(f,I)}console.log("\u6210\u529f\u5c55\u793a\u4e86\u76d2\u5b50\u9875\u9762"),o.YouziData.BI_AppOnce({actionNumber:1004}),o.YouziData.BI_Action({actionType:this.BILOG_GROUP,actionNumber:7})},loadCell:function(e,i){var t=this;if(e){var o=i.getComponent(cc.Button),n=i.getChildByName("Icon").getComponent(cc.Sprite),a=i.getChildByName("Name").getComponent(cc.Label),s=new cc.Component.EventHandler;s.target=this.node,s.component="YouziUI_Box",s.handler="touchBoxIconClick",s.customEventData=JSON.stringify(e),o.clickEvents.push(s),cc.loader.load(e.newIcon,function(e,i){t&&(e||(n.spriteFrame=new cc.SpriteFrame(i)))}),a.string=e.title,YouziBoxManager.sendExposureLog(e,1)}},btnLuoDiClick:function(){o.YouziData.BI_Action({actionType:this.BILOG_GROUP,actionNumber:8});var e=this,i=this.luodiInfo;console.log("\u70b9\u51fb\u843d\u5730\u9875 \u5373\u5c06\u8df3\u8f6c:",i.appid);i.locationIndex=o.BI_PAGE_TYPE.BUY_Screen,YouziBoxManager.navigateToOtherGame(i,function(i){e.closeLuoDi()})},touchBoxIconClick:function(e,i){o.YouziData.BI_Action({actionType:this.BILOG_GROUP,actionNumber:9});var t=JSON.parse(i);console.log("\u70b9\u51fb\u4e86\u76d2\u5b50icon",t.appid),t.locationIndex=o.BI_PAGE_TYPE.BUY_BOX,o.YouziData.navigateToOtherGame(t)},closeLuoDi:function(){this.luodiNode.active=!1,this.boxSrc.content.removeAllChildren(!0),this.showJiuGong(this.main,this.hot)},goGame:function(){this.gameSceneName&&(console.log("\u76d2\u5b50\u9875\u5b8c\u6bd5=>\u8df3\u8f6c\u5230\u573a\u666f",this.gameSceneName),cc.director.loadScene(this.gameSceneName))}});cc._RF.pop()},{"./YouziData":"YouziData"}],YouziUI_Float:[function(e,i,t){"use strict";cc._RF.push(i,"5c8c7DqKlNPzaI7ebYkTdNc","YouziUI_Float"),Object.defineProperty(t,"__esModule",{value:!0}),t.YouziCreateFloat=function(e,i){cc.loader.loadRes("youzi/prefabs/YouziUI_Float",function(t,o){try{i=i||{};var n=cc.instantiate(o);n.position=cc.v2(0,0),e.addChild(n);var s=n.getComponent(a);s.DIY(i),i.callback&&i.callback(n)}catch(t){console.error("YouziCreateFloat \u751f\u6210\u9519\u8bef",e,i)}})};var o=e("./YouziData"),n=e("./Youzi_Icon"),a=cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.loged=[],this.shadow=this.node.getChildByName("notTouch"),this.bg=this.node.getChildByName("bg"),this.scr=this.bg.getChildByName("ScrollView").getComponent(cc.ScrollView),this.view=this.scr.node.getChildByName("view"),this.close=this.bg.getChildByName("close")},start:function(){this.close.x=this.isRight?-this.close.x:this.close.x,this.close.scaleX=this.isRight?-1:1,this.originX=this.isRight?(this.node.width/2+this.close.width)*this.scale:-(this.node.width/2+this.close.width)*this.scale,this.node.x=this.originX,this.initShow()},DIY:function(e){var i=this,t=(e.size,e.position);this.isRight=e.isRight,this.btnNode=e.btnNode,this.isMainPage=e.isMainPage,this.closeEvent=e.closeEvent;var o=cc.view.getVisibleSize(),n=o.width<o.height?o.width:o.height;if(this.scale=n/640,this.node.scale=this.scale,t&&(this.node.position=t),this.btnNode){var a=this.btnNode.getComponent(cc.Button);if(a){var s=new cc.Component.EventHandler;s.target=this.node,s.component="YouziUI_Float",s.handler="openWithAnim",a.clickEvents.push(s)}else console.warn("YouziUI_Float \u4f20\u5165\u7684btnNode\u4e0d\u5305\u542bcc.Button\u7ec4\u4ef6")}else console.warn("\u672a\u8bbe\u7f6e\u62bd\u5c49\u7684\u5165\u53e3\u6309\u94ae");e.moreGameNode&&(this.cancelCallback=function(){e.moreGameNode&&e.moreGameNode.openYouziMoreGame&&e.moreGameNode.openYouziMoreGame()}),e.showFlag&&this.scheduleOnce(function(){i.openWithAnim(),i.scheduleOnce(function(){i.closeWithAnim()},1)},.2)},initShow:function(){o.YouziData._isDataLoaded?this.freshShow():o.YouziData._loadedCallBacks.push(this.freshShow.bind(this))},freshShow:function(){if(this.checkNeedCloseSome()){var e=this;(0,n.YouziCreateIcons)(o.BI_PAGE_TYPE.FLOAT,{size:{width:120,height:120},nameClose:!1,cancelCallback:e.cancelCallback},function(i){if(e&&e.scr&&e.scr.content)for(var t=0;t<i.length;t++)e.scr.content.addChild(i[t])})}else this.node.active=!1,this.btnNode&&(this.btnNode.active=!1),console.log("\u5173\u95ed\u62bd\u5c49\u53ca\u5165\u53e3\u663e\u793a",this.isMainPage)},scrollCallBack:function(){if(this.scr&&this.scr.content){var e=[],i=this.scr.content.children;if(this.loged!==i.length){for(var t=0;t<i.length;t++){var n=!1;t<this.loged&&(n=!0),n||e.push(i[t])}if(e.length>0){var a=this.view.convertToWorldSpaceAR(cc.v2(0,this.view.height/2+e[0].height)),s=this.view.convertToWorldSpaceAR(cc.v2(0,-this.view.height/2));this.loged+=o.YouziData._checkExposureInview1(e,!0,o.YouziData.hotListDatas,o.BI_PAGE_TYPE.FLOAT,0,0,s.y,a.y)}}}},openWithAnim:function(){this.loged=0,this.bg.active=!0,this.shadow.active=!0,this.shadow.runAction(cc.fadeTo(.2,210));var e=this.isRight?-this.node.width/2*this.scale:this.node.width/2*this.scale,i=this.node.y;this.node.runAction(cc.moveTo(.2,e,i)),this.scr.scrollToTop(0),this.scheduleOnce(this.scrollCallBack,0)},closeWithAnim:function(){var e=cc.fadeTo(.2,1),i=cc.callFunc(this.closeShadow,this);this.shadow.runAction(cc.sequence(e,i));var t=this.originX,o=this.node.y;this.node.runAction(cc.moveTo(.2,t,o)),this.closeEvent&&this.closeEvent()},closeShadow:function(){this.shadow.active=!1,this.bg.active=!1},onBtnClose:function(){this.closeWithAnim()},checkNeedCloseSome:function(){return!this.isMainPage||1==o.YouziData._pageOpen}});cc._RF.pop()},{"./YouziData":"YouziData","./Youzi_Icon":"Youzi_Icon"}],YouziUI_GameBanner:[function(e,i,t){"use strict";cc._RF.push(i,"6bd05yoKnBLvZTw7M2Vd5Q2","YouziUI_GameBanner"),Object.defineProperty(t,"__esModule",{value:!0}),t.YouziCreateGameBanner=function(e,i){cc.loader.loadRes("youzi/prefabs/YouziUI_GameBanner",function(t,o){try{i=i||{};var a=cc.instantiate(o);a.position=cc.v2(0,0),e.addChild(a);var s=a.getComponent(n);s.DIY(i),i.callback&&i.callback(a)}catch(t){console.error("YouziCreateGameBanner \u751f\u6210\u9519\u8bef",e,i)}})};var o=e("./YouziData"),n=cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.updateIndex=0,this.actionNode=this.node.getChildByName("ActionNode"),this.bannerType=o.BANNER_TYPE.GAME,this.logged=[]},start:function(){this.isOffSwitch||(this.node.active=!1,o.YouziData.addBanner(this)),this.initShow(),this.schedule(this.changeShow,this.switchTime)},DIY:function(e){var i=e.size,t=e.position;this.isVerticle=e.isVerticle,this.isOffSwitch=e.isOffSwitch,this.switchTime=e.switchTime||5,this.switchSpeed=e.switchSpeed||.3,this.isSinglePage=e.isSinglePage,this.singlePageIndex=e.singlePageIndex,i&&(this.node.width=i.width,this.node.height=i.height),t&&(this.node.position=t)},initShow:function(){o.YouziData._isDataLoaded?this.freshShow():o.YouziData._loadedCallBacks.push(this.freshShow.bind(this))},freshShow:function(){if(this.isSinglePage){var e=o.YouziData.gameBannerDatas[this.singlePageIndex];e&&(this.one=this.createBannerAtData(e),this.one.position=cc.v2(0,0))}else{var i=o.YouziData.gameBannerDatas[this.updateIndex];i&&(this.one=this.createBannerAtData(i),this.one.position=cc.v2(0,0))}},createBannerAtData:function(e){var i=this,t=new cc.Node;t.width=this.node.width,t.height=this.node.height,this.actionNode.addChild(t);var o=t.addComponent(cc.Sprite);o.sizeMode=cc.Sprite.SizeMode.CUSTOM,cc.loader.load(e.bannerImg,function(e,t){i&&(e?console.error(e):o.spriteFrame=new cc.SpriteFrame(t))});var n=t.addComponent(cc.Button),a=new cc.Component.EventHandler;return a.target=this.node,a.component="YouziUI_GameBanner",a.handler="touchBanner",a.customEventData=JSON.stringify(e),n.clickEvents.push(a),t},changeShow:function(){if(!(o.YouziData.gameBannerDatas.length<1)){this.updateIndex++,this.updateIndex>o.YouziData.gameBannerDatas.length-1&&(this.updateIndex=0);var e=o.YouziData.gameBannerDatas[this.updateIndex];if(e&&o.YouziData.gameBannerDatas.length>1)if(this.two=this.createBannerAtData(e),this.isVerticle){this.two.position=cc.v2(0,-this.node.height);var i=cc.moveBy(this.switchSpeed,cc.v2(0,this.node.height)),t=cc.moveBy(this.switchSpeed,cc.v2(0,this.node.height)),n=cc.callFunc(this.endChange,this);this.one.runAction(i),this.two.runAction(cc.sequence(t,n))}else{this.two.position=cc.v2(this.node.width,0);var a=cc.moveBy(this.switchSpeed,cc.v2(-this.node.width,0)),s=cc.moveBy(this.switchSpeed,cc.v2(-this.node.width,0)),r=cc.callFunc(this.endChange,this);this.one.runAction(a),this.two.runAction(cc.sequence(s,r))}this.logged[e.appid]||(this.logged[e.appid]=!0,o.YouziData.sendExposureLog(e,o.BI_PAGE_TYPE.GAME))}},endChange:function(){this.one.removeFromParent(!0),this.one=this.two},touchBanner:function(e,i){var t=JSON.parse(i);t.locationIndex=o.BI_PAGE_TYPE.GAME,o.YouziData.startOtherGame(t,null)},showBanner:function(){this.node&&(this.node.active=!0)},hideBanner:function(){this.node&&(this.node.active=!1)},destroySelf:function(){this&&this.node&&this.node.removeFromParent(!0)}});cc._RF.pop()},{"./YouziData":"YouziData"}],YouziUI_Guess:[function(e,i,t){"use strict";cc._RF.push(i,"390e23+6hVB8asd4D+aWQgf","YouziUI_Guess"),Object.defineProperty(t,"__esModule",{value:!0}),t.YouziCreateGuess=function(e,i){cc.loader.loadRes("youzi/prefabs/YouziUI_Guess",function(t,o){try{i=i||{};var n=cc.instantiate(o),s=n.getComponent(a);n.position=cc.v2(0,0),s.DIY(i),e.addChild(n),i.callback&&i.callback(n)}catch(t){console.error("YouziCreateGuess \u751f\u6210\u9519\u8bef",e,i),console.error(t)}})};var o=e("./YouziData"),n=e("./Youzi_Icon"),a=cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.loged=0,this.h=this.node.getChildByName("H"),this.v=this.node.getChildByName("V")},start:function(){var e=this.isVerticle?this.v:this.h;e.active=!0,this.bg=e.getChildByName("bg"),this.scr=e.getChildByName("ScrollView").getComponent(cc.ScrollView),this.view=this.scr.node.getChildByName("view"),this.initShow()},DIY:function(e){e.size;this.isVerticle=e.isVerticle;var i=e.position;e.moreGameNode&&(this.cancelCallback=function(){e.moreGameNode&&e.moreGameNode.openYouziMoreGame&&e.moreGameNode.openYouziMoreGame()}),i&&(this.node.position=i)},initShow:function(){o.YouziData._isDataLoaded?this.freshShow():o.YouziData._loadedCallBacks.push(this.freshShow.bind(this))},freshShow:function(){var e=this;(0,n.YouziCreateIcons)(o.BI_PAGE_TYPE.GUESS,{size:{width:90,height:90},nameClose:!0,cancelCallback:e.cancelCallback},function(i){if(e&&e.scr&&e.scr.content)for(var t=0;t<i.length;t++){var n=new cc.Node;n.setContentSize(new cc.Size(90,90)),n.addChild(i[t]),e.scr.content.addChild(n)}setTimeout(function(){e&&e.scr&&(o.YouziData.scrollviewAction(e.scr,1.5,5),e.scrollCallBack())},500)})},scrollCallBack:function(e,i,t){if(this.scr&&this.scr.content&&this.scr.content.children.length){cc.ScrollView.EventType.SCROLL_BEGAN!==i&&cc.ScrollView.EventType.TOUCH_UP!==i||(this.scr.node.stopAllActions(),o.YouziData.scrollviewAction(this.scr,1.5,5));var n=[],a=this.scr.content.children;if(this.initPosition||(this.initPosition=!0,this.minPosition=this.view.convertToWorldSpaceAR(cc.v2(-this.view.width/2,-this.view.height/2)),this.minPositionHideX=this.view.convertToWorldSpaceAR(cc.v2(-this.view.width/2-a[0].children[0].width,0)),this.maxPositionHideY=this.view.convertToWorldSpaceAR(cc.v2(0,this.view.height/2+a[0].children[0].height)),this.maxPosition=this.view.convertToWorldSpaceAR(cc.v2(this.view.width/2,this.view.height/2))),this.loged!==a.length){for(var s=0;s<a.length;s++){var r=!1;s<this.loged&&(r=!0),r||n.push(a[s].children[0])}n.length>0&&(this.loged+=o.YouziData._checkExposureInview1(n,this.isVerticle,o.YouziData.matrixBannerDatas,o.BI_PAGE_TYPE.GUESS,this.minPosition.x,this.maxPosition.x,this.minPosition.y,this.maxPosition.y))}o.YouziData._hideShowChild(a,this.isVerticle,this.minPositionHideX.x,this.maxPosition.x,this.minPosition.y,this.maxPositionHideY.y)}}});cc._RF.pop()},{"./YouziData":"YouziData","./Youzi_Icon":"Youzi_Icon"}],YouziUI_Main:[function(e,i,t){"use strict";cc._RF.push(i,"0cd33E+7VNPXJ/c9lToMfVV","YouziUI_Main"),Object.defineProperty(t,"__esModule",{value:!0}),t.YouziCreateMain=function(e,i){cc.loader.loadRes("youzi/prefabs/YouziUI_Main",function(t,o){try{i=i||{};var a=cc.instantiate(o);a.position=cc.v2(0,0),e.addChild(a);var s=a.getComponent(n);s.DIY(i),i.callback&&i.callback(a),i.isCreateMultipleMain&&(e.updateMultipleMain=s.updateMultipleMain.bind(s))}catch(t){console.error("YouziCreateMain \u751f\u6210\u9519\u8bef",e,i)}})};var o=e("./YouziData"),n=cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.updateIndex=0,this.btnNode=this.node.getChildByName("btn"),this.bg=this.btnNode.getChildByName("bg"),this.iconSprite=this.btnNode.getChildByName("mask").getChildByName("icon").getComponent(cc.Sprite),this.nameLabel=this.btnNode.getChildByName("nameLabel").getComponent(cc.RichText),this.loged=[]},start:function(){this.initShow(),this.isCreateMultipleMain||this.schedule(this.freshShow,5)},DIY:function(e){var i=e.size,t=e.position,o=e.bgColor;this.nameColor=e.nameColor;var n=e.actionClose,a=e.action;this.iconAnimSpeed=e.iconAnimSpeed||.2,this.isCreateMultipleMain=e.isCreateMultipleMain,this.mainIconIndex=e.mainIconIndex,t&&(this.node.position=t),o&&(this.bg.color=o),this.initAction(a,n),i&&i.width&&i.height&&(this.node.scaleX=i.width/104,this.node.scaleY=i.height/130),e.moreGameNode&&(this.cancelCallback=function(){e.moreGameNode&&e.moreGameNode.openYouziMoreGame&&e.moreGameNode.openYouziMoreGame()})},initAction:function(e,i){if(!i)if(e)this.node.runAction(e);else{var t=cc.repeatForever(cc.sequence(cc.rotateTo(2,-10),cc.rotateTo(2,10)));this.node.runAction(t)}},initShow:function(){o.YouziData._isDataLoaded?this.isCreateMultipleMain?this.updateMultipleMain(this.mainIconIndex):this.freshShow():this.isCreateMultipleMain?this.updateMultipleMain(this.mainIconIndex):o.YouziData._loadedCallBacks.push(this.freshShow.bind(this))},updateMultipleMain:function(e){var i=o.YouziData.mainRecDatas[e];this.loadIcon(i)},loadIcon:function(e){var i=this;if(e&&i&&i.iconSprite){var t=i.iconSprite.node.getComponent(cc.Animation),n=t.getClips();n.length>0&&t.stop(n[0].name),this.curData=e,this.btnNode.active=!0,1==e.dynamicType&&e.dynamicIcon?cc.loader.load(e.dynamicIcon,function(t,o){if(i&&!t&&i.iconSprite){for(var n=[],a=0;a<4;a++)for(var s=0;s<4;s++){var r=new cc.SpriteFrame(o,cc.rect(120*s,120*a,120,120));n.push(r)}var c="anim_icon"+e.appid,h=cc.AnimationClip.createWithSpriteFrames(n,n.length);h.speed=i.iconAnimSpeed,h.name=c,h.wrapMode=cc.WrapMode.Loop;var l=i.iconSprite.node.getComponent(cc.Animation);l.addClip(h),l.play(c)}}):cc.loader.load(e.iconImg,function(e,t){i&&!e&&i.iconSprite&&(i.iconSprite.spriteFrame=new cc.SpriteFrame(t))}),i.nameLabel.string="<b>"+e.slogan+"</b>",i.nameColor?i.nameLabel.string="<color="+this.nameColor+">"+i.nameLabel.string+"</c>":i.nameLabel.string="<color=#000000>"+i.nameLabel.string+"</c>",this.loged[e.appid]||(this.loged[e.appid]=!0,o.YouziData.sendExposureLog(e,o.BI_PAGE_TYPE.MAIN))}},freshShow:function(){var e=o.YouziData.mainRecDatas[this.updateIndex];this.loadIcon(e),this.updateIndex++,this.updateIndex>o.YouziData.mainRecDatas.length-1&&(this.updateIndex=0)},onJumpBtnClick:function(){this.curData&&(this.curData.locationIndex=o.BI_PAGE_TYPE.MAIN,o.YouziData.startOtherGame(this.curData,null,this.cancelCallback),this.isCreateMultipleMain||(this.unschedule(this.freshShow),this.schedule(this.freshShow,5),this.freshShow()))}});cc._RF.pop()},{"./YouziData":"YouziData"}],YouziUI_Matrix:[function(e,i,t){"use strict";cc._RF.push(i,"492bb3JkvZH1LCqhtQV8aD0","YouziUI_Matrix"),Object.defineProperty(t,"__esModule",{value:!0}),t.YouziCreateMatrix=function(e,i){try{cc.loader.loadRes("youzi/prefabs/YouziUI_Matrix",function(t,o){i=i||{};var n=cc.instantiate(o),s=n.getComponent(a);n.position=cc.v2(0,0),s.DIY(i),e.addChild(n),i.callback&&i.callback(n)})}catch(t){console.error("YouziCreateMatrix \u751f\u6210\u9519\u8bef",e,i)}};var o=e("./YouziData"),n=e("./Youzi_Icon"),a=cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.bg=this.node.getChildByName("bg"),this.txt=this.node.getChildByName("txt"),this.scr=this.node.getChildByName("ScrollView").getComponent(cc.ScrollView),this.view=this.scr.node.getChildByName("view"),this.bannerType=o.BANNER_TYPE.MATRIX,this.loged=0},start:function(){this.isOffSwitch||(this.node.active=!1,o.YouziData.addBanner(this)),this.initShow()},DIY:function(e){e.size;this.isVerticle=e.isVerticle;var i=e.position;this.isOffSwitch=e.isOffSwitch;var t=cc.view.getVisibleSize(),o=t.width<t.height?t.width:t.height;this.node.scale=o/640,e.moreGameNode&&(this.cancelCallback=function(){e.moreGameNode&&e.moreGameNode.openYouziMoreGame&&e.moreGameNode.openYouziMoreGame()}),i&&(this.node.position=i)},initShow:function(){o.YouziData._isDataLoaded?this.freshShow():o.YouziData._loadedCallBacks.push(this.freshShow.bind(this))},scrollCallBack:function(e,i,t){if(this.scr&&this.scr.content&&this.scr.content.children.length){cc.ScrollView.EventType.SCROLL_BEGAN!==i&&cc.ScrollView.EventType.TOUCH_UP!==i||(this.scr.node.stopAllActions(),o.YouziData.scrollviewAction(this.scr,1.5,5));var n=[],a=this.scr.content.children;if(this.initPosition||(this.initPosition=!0,this.minPosition=this.view.convertToWorldSpaceAR(cc.v2(-this.view.width/2,0)),this.minPositionHide=this.view.convertToWorldSpaceAR(cc.v2(-this.view.width/2-a[0].children[0].width,0)),this.maxPosition=this.view.convertToWorldSpaceAR(cc.v2(this.view.width/2,0))),this.loged!==a.length){for(var s=0;s<a.length;s++){var r=!1;s<this.loged&&(r=!0),r||n.push(a[s].children[0])}n.length>0&&(this.loged+=o.YouziData._checkExposureInview1(n,!1,o.YouziData.matrixBannerDatas,o.BI_PAGE_TYPE.MATRIX,this.minPosition.x,this.maxPosition.x))}o.YouziData._hideShowChild(a,!1,this.minPositionHide.x,this.maxPosition.x)}},freshShow:function(){var e=this;(0,n.YouziCreateIcons)(o.BI_PAGE_TYPE.MATRIX,{size:{width:105,height:105},nameClose:!1,cancelCallback:e.cancelCallback},function(i){if(e&&e.scr&&e.scr.content)for(var t=0;t<i.length;t++){var n=new cc.Node;n.setContentSize(new cc.Size(105,105)),n.addChild(i[t]),e.scr.content.addChild(n)}setTimeout(function(){e&&e.scr&&(o.YouziData.scrollviewAction(e.scr,1.5,5),e.scrollCallBack())},500)})},showBanner:function(){this.node&&(this.node.active=!0,o.YouziData.scrollviewAction(this.scr,1.5,5))},hideBanner:function(){this.node&&(this.scr.scrollToLeft(0),this.node.active=!1)},destroySelf:function(){this&&this.node&&this.node.removeFromParent(!0)}});cc._RF.pop()},{"./YouziData":"YouziData","./Youzi_Icon":"Youzi_Icon"}],YouziUI_MoreGame:[function(e,i,t){"use strict";cc._RF.push(i,"8bdd7rnyqxEr62Wys5AWxHz","YouziUI_MoreGame"),Object.defineProperty(t,"__esModule",{value:!0}),t.YouziCreateMoreGame=function(e,i){cc.loader.loadRes("youzi/prefabs/YouziUI_MoreGame",function(t,o){try{i=i||{};var n=cc.instantiate(o),s=n.getComponent(a);n.position=cc.v2(0,0),s.getUIVH(i),e.addChild(n),i.cancelCallback&&(n.setSiblingIndex(999),n.zIndex=999),s.DIY(i),i.callback&&i.callback(n),e.openYouziMoreGame=s.openWithAnim.bind(s)}catch(t){console.error("YouziCreateMoreGame \u751f\u6210\u9519\u8bef",e,i),console.log(t)}})};var o=e("./YouziData"),n=e("./Youzi_Icon"),a=cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.shadow=this.node.getChildByName("notTouch"),this.h=this.node.getChildByName("H"),this.v=this.node.getChildByName("V")},getUIVH:function(e){var i=cc.view.getVisibleSize();void 0===e.isVerticle?this.isVerticle=i.width<i.height:this.isVerticle=e.isVerticle},start:function(){this.curNodenode=this.isVerticle?this.v:this.h,this.scrollCount=this.isVerticle?8:10,this.scrollTime=this.isVerticle?.4:.3,this.wh=this.isVerticle?120:100,this.bg=this.curNodenode.getChildByName("bg"),this.scr=this.bg.getChildByName("ScrollView").getComponent(cc.ScrollView),this.view=this.scr.node.getChildByName("view"),this.title=this.bg.getChildByName("title"),this.close=this.bg.getChildByName("close"),this.initShow()},DIY:function(e){var i=this,t=(e.size,e.btnNode),o=cc.view.getVisibleSize(),n=o.width<o.height?o.width:o.height;if(this.node.scale=n/640,this.isShowNow=e.isShowNow,this.closeEvent=e.closeEvent,this.cancelCallback=e.cancelCallback,this.scheduleOnce(function(){if(e.cancelCallback){var t=cc.view.getVisibleSize(),o=i.node.parent.convertToNodeSpaceAR(cc.v2(t.width/2,t.height/2));i.node.position=cc.v2(o.x,o.y),i.node.setSiblingIndex(999)}else i.node.position=cc.v2(0,0)},0),t){var a=t.getComponent(cc.Button);if(a){var s=new cc.Component.EventHandler;s.target=this.node,s.component="YouziUI_MoreGame",s.handler="openWithAnim",a.clickEvents.push(s)}}},initShow:function(){o.YouziData._isDataLoaded?this.freshShow():o.YouziData._loadedCallBacks.push(this.freshShow.bind(this))},freshShow:function(){var e=this;(0,n.YouziCreateIcons)(o.BI_PAGE_TYPE.MORE,{size:{width:e.wh,height:e.wh}},function(i){if(e&&e.scr&&e.scr.content){e.isVerticle?e.scrollTime=.6*Math.ceil(i.length/3):e.scrollTime=.6*Math.ceil(i.length/5);for(var t=0;t<i.length;t++)e.scr.content.addChild(i[t]);e.isShowNow&&e.openWithAnim()}})},scrollCallBack:function(){if(this.scr&&this.scr.content){var e=[],i=this.scr.content.children;if(this.loged!==i.length){for(var t=0;t<i.length;t++){var n=!1;t<this.loged&&(n=!0),n||e.push(i[t])}this.initPosition||(this.maxPosition=this.view.convertToWorldSpaceAR(cc.v2(0,this.view.height/2+e[0].height)),this.minPosition=this.view.convertToWorldSpaceAR(cc.v2(0,-this.view.height/2)),this.initPosition=!0),e.length>0&&(this.loged+=o.YouziData._checkExposureInview1(e,!0,o.YouziData.moreDatas,o.BI_PAGE_TYPE.MORE,0,0,this.minPosition.y,this.maxPosition.y))}}},openWithAnim:function(){var e=this;if(e.cancelCallback&&this.node.parent){var i=cc.view.getVisibleSize(),t=this.node.parent.convertToNodeSpaceAR(cc.v2(i.width/2,i.height/2));this.node.position=cc.v2(t.x,t.y)}this.loged=0,this.shadow.active=!0,this.shadow.runAction(cc.fadeTo(.2,210)),this.bg.active=!0,this.curNodenode.active=!0,this.scr.scrollToTop(0);setTimeout(function(){e&&e.scr&&(o.YouziData.scrollviewAction(e.scr,0,e.scrollCount,e.scrollTime),e.scrollCallBack())},200)},closeWithAnim:function(){this.closeAll()},closeAll:function(){this.scr.scrollToTop(0),this.shadow.active=!1,this.bg.active=!1,this.curNodenode.active=!1,this.closeEvent&&this.closeEvent(),console.log("close---\x3e"+this.node.position)}});cc._RF.pop()},{"./YouziData":"YouziData","./Youzi_Icon":"Youzi_Icon"}],YouziUI_Offline:[function(e,i,t){"use strict";cc._RF.push(i,"13e90HCXKdGeb9hpQednX0c","YouziUI_Offline"),Object.defineProperty(t,"__esModule",{value:!0}),t.YouziCreateOffline=function(e,i){cc.loader.loadRes("youzi/prefabs/YouziUI_Offline",function(t,o){try{i=i||{};var n=cc.instantiate(o);n.position=cc.v2(0,0),e.addChild(n);var s=n.getComponent(a);s.DIY(i),i.callback&&i.callback(n)}catch(t){console.error("YouziCreateOffline \u751f\u6210\u9519\u8bef",e,i)}})};var o=e("./YouziData"),n=e("./Youzi_Icon"),a=cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.loged=0,this.offTime=0,this.shadow=this.node.getChildByName("notTouch"),this.bg=this.node.getChildByName("bg"),this.scr=this.bg.getChildByName("ScrollView").getComponent(cc.ScrollView),this.view=this.scr.node.getChildByName("view"),this.title=this.bg.getChildByName("title"),this.close=this.bg.getChildByName("close")},start:function(){this.initShow();var e=this;if(window.wx){if(!wx.onShow||!wx.onHide)return;wx.onShow(function(i){var t=(new Date).getSeconds();t-e.offTime>8&&e.openWithAnim(),e.offTime=t}),wx.onHide(function(i){e.offTime=(new Date).getSeconds()})}},DIY:function(e){e.size;this.closeEvent=e.closeEvent},initShow:function(){o.YouziData._isDataLoaded?this.freshShow():o.YouziData._loadedCallBacks.push(this.freshShow.bind(this))},freshShow:function(){var e=this;(0,n.YouziCreateIcons)(o.BI_PAGE_TYPE.OFFLINE,{},function(i){if(e&&e.scr&&e.scr.content)for(var t=0;t<i.length;t++)e.scr.content.addChild(i[t])})},scrollCallBack:function(){if(this.scr&&this.scr.content){this.initPosition||(this.initPosition=!0,this.minPosition=this.view.convertToWorldSpaceAR(cc.v2(-this.view.width/2,0)),this.maxPosition=this.view.convertToWorldSpaceAR(cc.v2(this.view.width/2,0)));var e=[],i=this.scr.content.children;if(this.loged!==i.length){for(var t=0;t<i.length;t++){var n=!1;t<this.loged&&(n=!0),n||e.push(i[t].children[0])}e.length>0&&(this.loged+=o.YouziData._checkExposureInview1(e,!0,o.YouziData.offlineBannerDatas,o.BI_PAGE_TYPE.OFFLINE,this.minPosition.x,this.maxPosition.x))}}},openWithAnim:function(){this&&this.node&&o.YouziData.offlineBannerDatas.length>0&&(this.shadow.active=!0,this.shadow.runAction(cc.fadeTo(.2,210)),this.bg.active=!0,this.loged=0,this.scr.scrollToLeft(0),this.scheduleOnce(this.scrollCallBack,0))},closeWithAnim:function(){this.closeAll()},closeAll:function(){this.shadow.active=!1,this.bg.active=!1,this.scr.scrollToLeft(0),this.closeEvent&&this.closeEvent()}});cc._RF.pop()},{"./YouziData":"YouziData","./Youzi_Icon":"Youzi_Icon"}],YouziUI_ScreenPage:[function(e,i,t){"use strict";cc._RF.push(i,"d762b9fyDNJCrZUXcIRZTXm","YouziUI_ScreenPage"),Object.defineProperty(t,"__esModule",{value:!0}),t.YouziCreateScreenPage=function(e,i){cc.loader.loadRes("youzi/prefabs/YouziUI_ScreenPage",function(t,o){try{i=i||{};var a=cc.instantiate(o);a.position=cc.v2(0,0),e.addChild(a);var s=a.getComponent(n);s.DIY(i),i.callback&&i.callback(a)}catch(t){console.error("YouziCreateScreenPage \u751f\u6210\u9519\u8bef",e,i)}})};var o=e("./YouziData"),n=cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.luodiNode=this.node.getChildByName("LuoDi"),this.luodiSmallImg=this.luodiNode.getChildByName("Small").getComponent(cc.Sprite),this.luodiBigImg=this.luodiNode.getChildByName("Big").getComponent(cc.Sprite),this.luodiBtn=this.luodiNode.getComponent(cc.Button)},start:function(){var e=cc.view.getVisibleSize();this.luodiBigImg.node.width=e.width,this.luodiBigImg.node.height=e.height,this.luodiNode.width=e.width,this.luodiNode.height=e.height,this.initShow()},loadErrHandle:function(){var e={};console.log("launch---"+JSON.stringify(this.launch)),this.launch.query&&this.launch.query.anChannelId&&(e.anChannelId=this.launch.query.anChannelId,e.ioChannelId=this.launch.query.ioChannelId),this.launch.referrerInfo&&this.launch.referrerInfo.extraData&&this.launch.referrerInfo.extraData.togame?(e.appid=this.launch.referrerInfo.extraData.togame,this.luodiInfo=e,console.log("jump info--"+e),this.luodiNode.active=!0):this.goGame()},DIY:function(e){this.gameSceneName=e.gameSceneName,this.launch=e.launch,this.customEnterGame=e.customEnterGame},initShow:function(){var e=new cc.Component.EventHandler;e.target=this.node,e.component="YouziUI_ScreenPage",e.handler="btnLuoDiClick",this.luodiBtn.clickEvents.push(e),o.YouziData._isDataLoaded?this.freshShow():(o.YouziData._loadedCallBacks.push(this.freshShow.bind(this)),o.YouziData._isLoadFinish?this.loadErrHandle():(console.log("add err callback to list"),o.YouziData._requestErrorCbs.push(this.loadErrHandle.bind(this))))},freshShow:function(){var e=this;if("undefined"!=typeof wx){this.launch&&(YouziBoxManager.wxLaunch(this.launch),this.initUI(this.launch));wx.onShow(function(i){YouziBoxManager.wxOnShow(i),e.initUI(i)})}else this.goGame()},initUI:function(e){var i=YouziBoxManager.referrerInfo.togame;if(i){var t=o.YouziData.getDataFromAllGameObj(i);t?(this.luodiInfo=t,e.query&&e.query.anChannelId&&(this.luodiInfo.anChannelId=e.query.anChannelId,this.luodiInfo.ioChannelId=e.query.ioChannelId),this.showLuoDi(t.newPush,t.iconImg)):(console.log("\u6ca1\u53d1\u73b0\u843d\u5730\u9875data",i),this.goGame())}else console.log("\u6ca1\u53d1\u73b0\u843d\u5730\u9875appid"),this.goGame()},showLuoDi:function(e,i){var t=this;e?cc.loader.load(e,function(e,i){t&&(!e&&t.luodiBigImg&&t.luodiNode?(t.luodiBigImg.spriteFrame=new cc.SpriteFrame(i),t.luodiNode.active=!0,YouziBoxManager.sendBox2Open()):t.closeLuoDi())}):i?cc.loader.load(i,function(e,i){t&&(!e&&t.luodiSmallImg&&t.luodiNode?(t.luodiSmallImg.spriteFrame=new cc.SpriteFrame(i),t.luodiNode.active=!0,YouziBoxManager.sendBox2Open()):t.closeLuoDi())}):t.closeLuoDi()},btnLuoDiClick:function(){var e=this,i=this.luodiInfo;console.log("\u70b9\u51fb\u843d\u5730\u9875 \u5373\u5c06\u8df3\u8f6c:",i.appid);YouziBoxManager.navigateToOtherGame(i,function(i){e.closeLuoDi()})},closeLuoDi:function(){this.luodiNode&&(this.luodiNode.active=!1),this.goGame()},goGame:function(){this.customEnterGame?this.customEnterGame():this.gameSceneName&&(console.log("\u76d2\u5b50\u9875\u5b8c\u6bd5=>\u8df3\u8f6c\u5230\u573a\u666f",this.gameSceneName),cc.director.loadScene(this.gameSceneName))}});cc._RF.pop()},{"./YouziData":"YouziData"}],YouziUI_SmallMatrixWall:[function(e,i,t){"use strict";cc._RF.push(i,"8b2373vb9ZBfbngq4viCUgl","YouziUI_SmallMatrixWall"),Object.defineProperty(t,"__esModule",{value:!0}),t.YouziCreateSmallMatrixWall=function(e,i){cc.loader.loadRes("youzi/prefabs/YouziUI_SmallMatrixWall",function(t,o){try{i=i||{};var n=cc.instantiate(o),s=n.getComponent(a);n.position=cc.v2(0,0),s.DIY(i),e.addChild(n),i.callback&&i.callback(n)}catch(t){console.error("YouziCreateSmallMatrixWall \u751f\u6210\u9519\u8bef",e,i)}})};var o=e("./YouziData"),n=e("./Youzi_Icon"),a=cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.loged=0,this.h=this.node.getChildByName("H"),this.v=this.node.getChildByName("V")},start:function(){var e=this.isVerticle?this.v:this.h;this.scrollCount=this.isVerticle?8:10,this.scrollTime=this.isVerticle?.4:.3,e.active=!0,this.bg=e.getChildByName("bg"),this.scr=this.bg.getChildByName("ScrollView").getComponent(cc.ScrollView),this.view=this.scr.node.getChildByName("view"),this.title=this.bg.getChildByName("title"),this.initShow()},DIY:function(e){var i=cc.view.getVisibleSize(),t=i.width<i.height?i.width:i.height;this.node.scale=t/640,this.isVerticle=e.isVerticle},initShow:function(){o.YouziData._isDataLoaded?this.freshShow():o.YouziData._loadedCallBacks.push(this.freshShow.bind(this))},freshShow:function(){var e=this;(0,n.YouziCreateIcons)(o.BI_PAGE_TYPE.SMALL_MATRIX_WALL,{size:{width:110,height:110}},function(i){if(e&&e.scr&&e.scr.content){e.isVerticle?e.scrollTime=1.4*Math.ceil(i.length/4):e.scrollTime=1.2*Math.ceil(i.length/4);for(var t=0;t<i.length;t++)e.scr.content.addChild(i[t])}setTimeout(function(){e&&e.scr&&(o.YouziData.scrollviewAction(e.scr,0,e.scrollCount,e.scrollTime),e.scrollCallBack())},500)})},scrollCallBack:function(e,i,t){if(this.scr&&this.scr.content){cc.ScrollView.EventType.SCROLL_BEGAN!==i&&cc.ScrollView.EventType.TOUCH_UP!==i||(this.scr.node.stopAllActions(),o.YouziData.scrollviewAction(this.scr,0,this.scrollCount,this.scrollTime));var n=[],a=this.scr.content.children;if(this.initPosition||(this.initPosition=!0,this.minPosition=this.view.convertToWorldSpaceAR(cc.v2(0,-this.view.height/2)),this.maxPosition=this.view.convertToWorldSpaceAR(cc.v2(0,this.view.height/2))),this.loged!==a.length){for(var s=0;s<a.length;s++){var r=!1;s<this.loged&&(r=!0),r||n.push(a[s])}n.length>0&&(this.loged+=o.YouziData._checkExposureInview1(n,!0,o.YouziData.moreDatas,o.BI_PAGE_TYPE.SMALL_MATRIX_WALL,0,0,this.minPosition.y,this.maxPosition.y))}}}});cc._RF.pop()},{"./YouziData":"YouziData","./Youzi_Icon":"Youzi_Icon"}],Youzi_FloatBtn:[function(e,i,t){"use strict";cc._RF.push(i,"053a7aqdoFHfb2yzxOKxg14","Youzi_FloatBtn"),Object.defineProperty(t,"__esModule",{value:!0}),t.YouziCreateFloatBtn=function(e,i){cc.loader.loadRes("youzi/prefabs/Youzi_FloatBtn",function(t,n){try{i=i||{};var a=cc.instantiate(n);a.position=cc.v2(0,0),e.addChild(a);var s=a.getComponent(o);s.DIY(i),i.callback&&i.callback(a)}catch(t){console.error("YouziCreateFloatBtn \u751f\u6210\u9519\u8bef",e,i)}})};var o=cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.img=this.node.getChildByName("Image"),this.btn=this.node.getComponent(cc.Button)},start:function(){var e=new cc.Component.EventHandler;e.target=this.node,e.component="Youzi_FloatBtn",e.handler="btnClick",this.btn.clickEvents.push(e),this.btnAnim()},btnAnim:function(){this.img.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,1.1),cc.scaleTo(.5,1))))},btnClick:function(){this.clickEvent&&this.clickEvent()},DIY:function(e){this.isRight=e.isRight,this.node.scaleX=this.isRight?-1:1,this.clickEvent=e.clickEvent,e.position&&(this.node.position=e.position)}});cc._RF.pop()},{}],Youzi_Icon:[function(e,i,t){"use strict";cc._RF.push(i,"1aa38PsQ1dD2reWB6XP3oBC","Youzi_Icon"),Object.defineProperty(t,"__esModule",{value:!0}),t.YouziCreateIcons=function(e,i,t){try{i=i||{};var a=[];cc.loader.loadRes("youzi/prefabs/Youzi_Icon",function(s,r){if(o.YouziData._isDataLoaded){for(var c=o.YouziData.getDatasByBIType(e),h=0;h<c.length;h++){var l=c[h],u=cc.instantiate(r);u.position=cc.v2(0,0),u.name=l.appid;var d=u.getComponent(n);i.youziData=l,i.locationIndex=e,d.DIY(i),a.push(u)}t&&t(a)}else console.warn("\u83b7\u5f97\u4e2d\u5fc3\u5316\u6570\u636e\u5931\u8d25,\u6216\u4e2d\u5fc3\u5316\u6570\u636e\u4e0b\u884c\u672a\u5b8c\u6210 \u65e0\u6cd5\u521b\u5efaIcon"),t&&t([])})}catch(e){console.error("YouziCreateIcon \u751f\u6210\u9519\u8bef",parentNode,i),t&&t([])}};var o=e("./YouziData"),n=cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.locationIndex=this.locationIndex||o.BI_PAGE_TYPE.CUSTOM_COMPONENT,this.mask=this.node.getChildByName("mask"),this.iconSp=this.mask.getChildByName("icon").getComponent(cc.Sprite),this.redHitNode=this.node.getChildByName("redHit"),this.nameLabel=this.node.getChildByName("name").getComponent(cc.Label)},start:function(){var e=this.changeSize;if(e){this.node.width=e.width,this.node.height=e.height,this.mask.width=e.width,this.mask.height=e.height,this.iconSp.node.width=e.width,this.iconSp.node.height=e.height;var i=e.width/130,t=e.height/130,o=i>=t?t:i;this.redHitNode.width=30*o,this.redHitNode.height=30*o,this.nameLabel.node.width=150*o,this.nameLabel.node.height=32*o,this.nameLabel.fontSize=Math.floor(24*o),this.nameLabel.lineHeight=Math.floor(26*o),this.redHitNode.x=this.node.width/2-5,this.redHitNode.y=this.node.height/2-10,this.nameLabel.node.y=-(this.node.height/2+21*o)}this.nameClose&&(this.nameLabel.node.active=!1),this.changeColor&&(this.nameLabel.node.color=this.changeColor),this.youziData&&1==this.youziData.hotred&&(this.redHitNode.active=!0),this.initShow()},DIY:function(e){this.youziData=e.youziData,this.locationIndex=e.locationIndex,this.iconAnimSpeed=e.iconAnimSpeed||.6,this.changeSize=e.size;var i=e.position;this.changeColor=e.nameColor,this.nameClose=e.nameClose,this.cancelCallback=e.cancelCallback,i&&(this.node.position=i)},initShow:function(){var e=this;this.youziData?(1==e.youziData.dynamicType&&this.youziData.dynamicIcon?cc.loader.load(this.youziData.dynamicIcon,function(i,t){if(e&&!i){for(var o=[],n=0;n<4;n++)for(var a=0;a<4;a++){var s=new cc.SpriteFrame(t,cc.rect(120*a,120*n,120,120));o.push(s)}var r="anim_icon"+e.youziData.appid,c=cc.AnimationClip.createWithSpriteFrames(o,o.length);c.speed=e.iconAnimSpeed,c.name=r,c.wrapMode=cc.WrapMode.Loop;var h=e.iconSp.node.getComponent(cc.Animation);h.addClip(c),h.play(r)}}):cc.loader.load(this.youziData.iconImg,function(i,t){e&&(i||e.iconSp&&(e.iconSp.spriteFrame=new cc.SpriteFrame(t)))}),this.nameLabel.string=this.youziData.title):console.error("Youzi_Icon\u6570\u636e\u9519\u8bef",this.youziData)},sendExposureLog:function(){o.YouziData.sendExposureLog(this.youziData,this.locationIndex)},touchIconClick:function(){this.redHitNode.active=!1,this.youziData.locationIndex=this.locationIndex,console.log("touchIconClick",this.youziData),o.YouziData.startOtherGame(this.youziData,null,this.cancelCallback)}});cc._RF.pop()},{"./YouziData":"YouziData"}],Youzi_MoreGameBtn:[function(e,i,t){"use strict";cc._RF.push(i,"76931GseHRB25IA3/burNKv","Youzi_MoreGameBtn"),Object.defineProperty(t,"__esModule",{value:!0}),t.YouziCreateMoreGameBtn=function(e,i){cc.loader.loadRes("youzi/prefabs/Youzi_MoreGameBtn",function(t,n){try{i=i||{};var a=cc.instantiate(n);a.position=cc.v2(0,0),e.addChild(a);var s=a.getComponent(o);s.DIY(i),i.callback&&i.callback(a)}catch(t){console.error("YouziCreateMoreGameBtn \u751f\u6210\u9519\u8bef",e,i)}})};var o=cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.btn=this.node.getComponent(cc.Button)},start:function(){var e=new cc.Component.EventHandler;e.target=this.node,e.component="Youzi_MoreGameBtn",e.handler="btnClick",this.btn.clickEvents.push(e)},btnClick:function(){this.clickEvent&&this.clickEvent()},DIY:function(e){this.clickEvent=e.clickEvent,e.size&&(this.node.width=e.size.width,this.node.height=e.size.height),e.position&&(this.node.position=e.position)}});cc._RF.pop()},{}],Youzi_MultipleMain:[function(e,i,t){"use strict";cc._RF.push(i,"34286su8u9CJ6/blG56alOv","Youzi_MultipleMain"),Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,i){for(var t=0;t<i.length;t++){var o=i[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(i,t,o){return t&&e(i.prototype,t),o&&e(i,o),i}}();t.YouziCreateMultipleMain=function(e,i,t){var o=new r;YouziData._isDataLoaded?o.createMultipleMain(e,i,t):YouziData._loadedCallBacks.push(function(){o.createMultipleMain(e,i,t)});return o};var n=e("./YouziUI_Main"),a=e("./YouziUI_MoreGame");function s(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(){s(this,e)}return o(e,[{key:"createMultipleMain",value:function(e,i,t){var o=YouziData.getMainNum(e);if(o[0]){if(t){(0,a.YouziCreateMoreGame)(t,{isShowNow:!1,cancelCallback:!0})}var s=o[0],r=o[1];this.mainNodeNum=s,this.isSwitchMain=r,this.nodes=e,i||(i=[]);for(var c=0;c<s;c++)i[c]||(i[c]={}),t&&(i[c].moreGameNode=t),i[c].isCreateMultipleMain=!0,i[c].mainIconIndex=c,(0,n.YouziCreateMain)(e[c],i[c]);this.setMainInterval()}}},{key:"setMainInterval",value:function(){if(this.isSwitchMain){var e=this;e.changeIconInterval=setInterval(function(){for(var i=YouziData.mainRecDatas.length,t=YouziData.getGamesIndex(i,e.mainNodeNum),o=0;o<e.mainNodeNum;o++)e.nodes[o].getParent()||clearInterval(e.changeIconInterval),e.nodes[o].updateMultipleMain&&e.nodes[o].updateMultipleMain(t[o])},5e3)}}},{key:"clearMainInterval",value:function(){this.changeIconInterval&&clearInterval(this.changeIconInterval)}}]),e}();cc._RF.pop()},{"./YouziUI_Main":"YouziUI_Main","./YouziUI_MoreGame":"YouziUI_MoreGame"}],Youzi_WechatBanner:[function(e,i,t){"use strict";cc._RF.push(i,"f05d3utcaFHPb+vkl12uwMg","Youzi_WechatBanner"),Object.defineProperty(t,"__esModule",{value:!0}),t.Youzi_WechatBanner=t.WECHAT_BANNER_POSTYPE=void 0;var o=function(){function e(e,i){for(var t=0;t<i.length;t++){var o=i[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(i,t,o){return t&&e(i.prototype,t),o&&e(i,o),i}}(),n=e("./YouziData");e("../Youzi");function a(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}var s=t.WECHAT_BANNER_POSTYPE={BOTTOM:1,TOP:2};t.Youzi_WechatBanner=function(){function e(i){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];a(this,e),this.adUnitId=i,this.posType=t||1,this.offset=o||cc.v2(0,0),this.bannerType=n.BANNER_TYPE.WX,this.isShowBanner=!1,this.isOffSwitch=s,this.isOffSwitchSelf=r,this.initShow()}return o(e,[{key:"initShow",value:function(){n.YouziData._isDataLoaded?this.freshShow():n.YouziData._loadedCallBacks.push(this.freshShow.bind(this))}},{key:"freshShow",value:function(){this.createWXBanner(),this.isOffSwitch||(n.YouziData.addBanner(this),this._autoSwitchSelf())}},{key:"createWXBanner",value:function(){if(window.wx&&wx.createBannerAd){var e=this,i=wx.getSystemInfoSync().screenWidth,t=wx.getSystemInfoSync().screenHeight,o=cc.view.getDesignResolutionSize(),n=i/o.width*o.height,a=i/o.width*100+(t-n)/2,r=this.bannerAd,c=wx.createBannerAd({adUnitId:this.adUnitId,style:{left:this.offset.x,top:this.offset.y,width:i}}),h=!1;c.onResize(function(o){if(!h){if(c.style.realHeight>a){h=!0;var n=i*a/c.style.realHeight;n=cc.misc.clampf(n,300,9999),c.style.width=n,c.style.top=t-c.style.realHeight*(n/c.style.realWidth)+e.offset.y,c.style.left=(i-c.style.width)/2+e.offset.x}else c.style.top=t-c.style.realHeight+e.offset.y,t/i>2&&(c.style.top=c.style.top-34+e.offset.y);e.posType==s.TOP&&(c.style.left=(i-c.style.width)/2+e.offset.x,c.style.top=e.offset.y,t/i>2?c.style.top+=76:i/t>2&&(c.style.top+=76))}}),c.onLoad(function(i){r&&(r.hide(),r.destroy()),e.isShowBanner?c.show():c.hide()}),c.onError(function(e){console.warn("\u5fae\u4fe1banner\u51fa\u9519",e)}),this.bannerAd=c}}},{key:"showBanner",value:function(){this.isShowBanner=!0,this.bannerAd&&this.bannerAd.show()}},{key:"hideBanner",value:function(){this.isShowBanner=!1,this.bannerAd&&this.bannerAd.hide()}},{key:"destroySelf",value:function(){this.bannerAd&&(this.bannerAd.destroy(),this.bannerAd=null),this.refreshTimer&&(clearInterval(this.refreshTimer),this.refreshTimer=null),this.isShowBanner=!1}},{key:"switchBannerNow",value:function(){this.refreshTimer&&(clearInterval(this.refreshTimer),this.refreshTimer=null),this.createWXBanner(),this._autoSwitchSelf()}},{key:"_autoSwitchSelf",value:function(){if(!this.isOffSwitchSelf){var e=this;this.refreshTimer=setInterval(function(){e.createWXBanner()},1e3*n.YouziData._bannerCreateInterval)}}}]),e}();cc._RF.pop()},{"../Youzi":"Youzi","./YouziData":"YouziData"}],Youzi:[function(e,i,t){"use strict";cc._RF.push(i,"5ac48YRSw5Iw7qFNrDdQ46Y","Youzi"),Object.defineProperty(t,"__esModule",{value:!0}),t.Youzi=void 0;var o=e("./scripts/YouziData"),n=e("./scripts/YouziUI_Main"),a=e("./scripts/YouziUI_Float"),s=e("./scripts/Youzi_FloatBtn"),r=e("./scripts/YouziUI_MoreGame"),c=e("./scripts/Youzi_MoreGameBtn"),h=e("./scripts/YouziUI_Guess"),l=e("./scripts/YouziUI_Matrix"),u=e("./scripts/YouziUI_GameBanner"),d=e("./scripts/Youzi_WechatBanner"),p=e("./scripts/YouziUI_Offline"),f=e("./scripts/YouziUI_Box"),g=e("./scripts/Youzi_Icon"),m=e("./scripts/YouziUI_ScreenPage"),v=e("./scripts/YouziUI_SmallMatrixWall"),I=e("./scripts/Youzi_MultipleMain"),_=t.Youzi={init:function(e,i,t){o.YouziData.init(e,i,t)},createYouziUI_Main:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._createMoreAfterCancel(e,i),(0,n.YouziCreateMain)(e,i)},createYouziUI_MultipleMain:function(e,i,t){return(0,I.YouziCreateMultipleMain)(e,i,t)},createYouzi_FloatBtn:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.YouziCreateFloatBtn)(e,i)},createYouziUI_Float:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments[2];if(t){i||(i={}),i.moreGameNode=t;var o=Object.create(i);this._createMoreAfterCancel(t,o)}(0,a.YouziCreateFloat)(e,i)},createYouzi_MoreGameBtn:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,c.YouziCreateMoreGameBtn)(e,i)},createYouziUI_MoreGame:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,r.YouziCreateMoreGame)(e,i)},createYouziUI_Guess:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._createMoreAfterCancel(e,i),(0,h.YouziCreateGuess)(e,i)},_createMoreAfterCancel:function(e,i){i.moreGameNode=e;(0,r.YouziCreateMoreGame)(e,{isShowNow:!1,cancelCallback:!0})},createYouziUI_Matrix:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._createMoreAfterCancel(e,i),(0,l.YouziCreateMatrix)(e,i)},createYouziUI_GameBanner:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,u.YouziCreateGameBanner)(e,i)},createYouziUI_WechatBanner:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new d.Youzi_WechatBanner(e,i,t,o,n)},createYouziUI_Offline:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,p.YouziCreateOffline)(e,i)},createYouziIcons:function(e,i,t){(0,g.YouziCreateIcons)(e,i,t)},createYouziUI_Box:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,f.YouziCreateBox)(e,i)},createYouziUI_ScreenPage:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,m.YouziCreateScreenPage)(e,i)},createYouziUI_SmallMatrixWall:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,v.YouziCreateSmallMatrixWall)(e,i)}};window.Youzi=_,cc._RF.pop()},{"./scripts/YouziData":"YouziData","./scripts/YouziUI_Box":"YouziUI_Box","./scripts/YouziUI_Float":"YouziUI_Float","./scripts/YouziUI_GameBanner":"YouziUI_GameBanner","./scripts/YouziUI_Guess":"YouziUI_Guess","./scripts/YouziUI_Main":"YouziUI_Main","./scripts/YouziUI_Matrix":"YouziUI_Matrix","./scripts/YouziUI_MoreGame":"YouziUI_MoreGame","./scripts/YouziUI_Offline":"YouziUI_Offline","./scripts/YouziUI_ScreenPage":"YouziUI_ScreenPage","./scripts/YouziUI_SmallMatrixWall":"YouziUI_SmallMatrixWall","./scripts/Youzi_FloatBtn":"Youzi_FloatBtn","./scripts/Youzi_Icon":"Youzi_Icon","./scripts/Youzi_MoreGameBtn":"Youzi_MoreGameBtn","./scripts/Youzi_MultipleMain":"Youzi_MultipleMain","./scripts/Youzi_WechatBanner":"Youzi_WechatBanner"}]},{},["Youzi","YouziBoxManager","YouziData","YouziUI_Box","YouziUI_Float","YouziUI_GameBanner","YouziUI_Guess","YouziUI_Main","YouziUI_Matrix","YouziUI_MoreGame","YouziUI_Offline","YouziUI_ScreenPage","YouziUI_SmallMatrixWall","Youzi_FloatBtn","Youzi_Icon","Youzi_MoreGameBtn","Youzi_MultipleMain","Youzi_WechatBanner"]);